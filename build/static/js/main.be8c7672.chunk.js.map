{"version":3,"sources":["components/Number.js","components/Numbers.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Message.js","components/App.js","index.js"],"names":["Number","person","name","number","Numbers","persons","handleRemove","Object","keys","length","map","i","id","onClick","Filter","value","handler","onChange","PersonForm","handleNameChange","handleNewNumberChange","handleSubmitClick","type","baseUrl","axios","get","then","response","data","newElement","post","put","delete","Message","message","style","error","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","txt","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","filteredPersons","setFilteredPersons","setMessage","useEffect","personService","personsGet","filterByValue","newFilteredPersons","filter","toLowerCase","includes","toLocaleLowerCase","isRepeated","isrep","returnElement","forEach","element","showMessage","time","setTimeout","event","target","preventDefault","rep","window","confirm","updatePerson","newPersons","parseInt","concat","catch","console","log","newPerson","removeElement","find","removedPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qMAUeA,EARA,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OAChB,OACE,qCACGA,EAAOC,KADV,IACiBD,EAAOE,WCiBbC,EAnBC,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,aAC1B,OAAoC,IAAhCC,OAAOC,KAAKH,GAASI,OAChB,uDAIP,mCACGJ,EAAQK,KAAI,SAACT,EAAQU,GAAT,OACX,gCACE,cAAC,EAAD,CAAQV,OAAQA,IAChB,wBAAQW,GAAIX,EAAOW,GAAIC,QAASP,EAAhC,sBAFQK,SCDHG,EARA,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,QACvB,OACE,0DACoB,uBAAOD,MAAOA,EAAOE,SAAUD,QCuBxCE,EA1BI,SAAC,GAMb,IALLhB,EAKI,EALJA,KACAC,EAII,EAJJA,OACAgB,EAGI,EAHJA,iBACAC,EAEI,EAFJA,sBACAC,EACI,EADJA,kBAEA,OACE,mCACE,iCACE,yCACQ,uBAAON,MAAOb,EAAMe,SAAUE,OAEtC,2CACU,uBAAOJ,MAAOZ,EAAQc,SAAUG,OAE1C,8BACE,wBAAQE,KAAK,SAAST,QAASQ,EAA/B,yB,gBClBJE,EAAU,eAqBD,EAnBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAiB9B,EAdA,SAACC,GACd,OAAOL,IAAMM,KAAKP,EAASM,GAAYH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAatD,EAVA,SAACC,EAAYjB,GAC1B,OAAOY,IACJO,IADI,UACGR,EADH,YACcX,GAAMiB,GACxBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAOlB,EAJA,SAAChB,GACd,OAAOY,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BX,IAAMc,MAAK,SAACC,GAAD,OAAcA,EAASC,SCevDK,EAlCC,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAqBjB,GAAoC,IAAhC3B,OAAOC,KAAK0B,GAASzB,OACvB,OAAO,6BAGT,IAAM0B,EAAQD,EAAQE,MAdH,CACjBC,MAAO,MACPC,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAjBK,CACnBN,MAAO,QACPC,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAmBhB,OACE,mCACE,mBAAGR,MAAOA,EAAV,SAAkBD,EAAQU,SC+HjBC,EArJH,WAEV,MAA8BC,mBAAS,IAAvC,mBAAOzC,EAAP,KAAgB0C,EAAhB,KACA,EAA8BD,mBAAS,IAAvC,mBAAOE,EAAP,KAAgBC,EAAhB,KACA,EAAkCH,mBAAS,IAA3C,mBAAOI,EAAP,KAAkBC,EAAlB,KACA,EAAkCL,mBAAS,IAA3C,mBAAOM,EAAP,KAAkBC,EAAlB,KACA,EAA8CP,mBAAS,IAAvD,mBAAOQ,EAAP,KAAwBC,EAAxB,KACA,EAA8BT,mBAAS,IAAvC,mBAAOZ,EAAP,KAAgBsB,EAAhB,KAGAC,qBAAU,WACRC,IAAuBhC,MAAK,SAACiC,GAC3BZ,EAAWY,GACXJ,EAAmBI,QAEpB,IAGH,IA6EMC,EAAgB,SAAC7C,EAAOV,GAC5B,IAAMwD,EAAqBxD,EAAQyD,QAAO,SAAC7D,GACzC,OAAOA,EAAOC,KAAK6D,cAAcC,SAASjD,EAAMkD,wBAElDZ,EAAatC,GACbwC,EAAmBM,IAIfK,EAAa,SAACrC,GAClB,IAAIsC,GAAQ,EACRC,EAAgB,KASpB,OAPA/D,EAAQgE,SAAQ,SAACC,GACXA,EAAQpE,OAAS2B,EAAW3B,OAC9BiE,GAAQ,EACRC,EAAgBE,QAIhBH,GACKC,GAOLG,EAAc,SAAC3B,GAAqC,IAAhCR,EAA+B,wDAAhBoC,EAAgB,uDAAT,IAC9ChB,EAAW,CAAEZ,MAAKR,UAClBqC,YAAW,WACTjB,EAAW,MACVgB,IAGL,OACE,gCACE,2CACA,cAAC,EAAD,CAAStC,QAASA,IAClB,cAAC,EAAD,CAAQnB,MAAOqC,EAAWpC,QAlHH,SAAC0D,GAAD,OACzBd,EAAcc,EAAMC,OAAO5D,MAAOV,MAkHhC,2CACA,cAAC,EAAD,CACEH,KAAM8C,EACN7C,OAAQ+C,EACR/B,iBAzHmB,SAACuD,GAAD,OAAWzB,EAAWyB,EAAMC,OAAO5D,QA0HtDK,sBAzHwB,SAACsD,GAAD,OAAWvB,EAAauB,EAAMC,OAAO5D,QA0H7DM,kBArHoB,SAACqD,GACzBA,EAAME,iBACN,IAAI/C,EAAa,CAAE3B,KAAM8C,EAAS7C,OAAQ+C,GACpC2B,EAAMX,EAAWrC,IAGb,IAARgD,GACAC,OAAOC,QAAP,gCAAwCF,EAAI3E,KAA5C,yBAEA2B,EAAU,2BAAQgD,GAAR,IAAa1E,OAAQ+C,IAC/BQ,EACU7B,EAAYA,EAAWjB,IAC9Bc,MAAK,SAACsD,GACL,IAAIC,EAAa5E,EAAQyD,QACvB,SAAC7D,GAAD,OAAYiF,SAASjF,EAAOW,MAAQsE,SAASF,EAAapE,OAE5DqE,EAAaA,EAAWE,OAAOH,GAC/BjC,EAAWkC,GACXrB,EAAcR,EAAW6B,GACzBV,EAAY,UAAD,OAAWS,EAAa9E,UAEpCkF,OAAM,SAAChD,GACNiD,QAAQC,IAAI,eACZf,EAAYnC,EAAMT,SAASC,KAAKQ,OAAO,OAIxCyC,GACHnB,EACU7B,GACPH,MAAK,SAAC6D,GACL,IAAMN,EAAa5E,EAAQ8E,OAAOI,GAClCxC,EAAWkC,GACXrB,EAAcR,EAAW6B,GACzBV,EAAY,WAAD,OAAYgB,EAAUrF,UAElCkF,OAAM,SAAChD,GACNiD,QAAQC,IAAI,eACZf,EAAYnC,EAAMT,SAASC,KAAKQ,MAAQA,GAAQ,MAItDe,EAAa,IACbF,EAAW,OA4ET,yCACA,cAAC,EAAD,CAAS5C,QAASiD,EAAiBhD,aAzElB,SAACoE,GACpB,IAAMc,EAAgBnF,EAAQoF,MAC5B,SAACnB,GAAD,OAAaY,SAASZ,EAAQ1D,MAAQsE,SAASR,EAAMC,OAAO/D,OAG1DkE,OAAOC,QAAP,gCAAwCS,EAActF,KAAtD,OACFwD,EACU8B,EAAc5E,IACrBc,MAAK,SAACgE,GACL,IAAMT,EAAa5E,EAAQyD,QACzB,SAACQ,GAAD,OAAaA,EAAQ1D,KAAO4E,EAAc5E,MAE5CmC,EAAWkC,GACXrB,EAAcR,EAAW6B,GACzBV,EAAY,WAAD,OAAYiB,EAActF,UAEtCkF,OAAM,SAAChD,GACNiD,QAAQC,IAAI,eACZf,EAAYnC,EAAMT,SAASC,KAAKQ,MAAQA,GAAQ,aC3F1DuD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.be8c7672.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Number = ({ person }) => {\r\n  return (\r\n    <>\r\n      {person.name} {person.number}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Number;\r\n","import React from \"react\";\r\nimport Number from \"./Number\";\r\n\r\nconst Numbers = ({ persons, handleRemove }) => {\r\n  if (Object.keys(persons).length === 0) {\r\n    return <>No coincidences</>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {persons.map((person, i) => (\r\n        <div key={i}>\r\n          <Number person={person} />\r\n          <button id={person.id} onClick={handleRemove}>\r\n            delete\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Numbers;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ value, handler }) => {\r\n  return (\r\n    <>\r\n      filter shown with <input value={value} onChange={handler} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  name,\r\n  number,\r\n  handleNameChange,\r\n  handleNewNumberChange,\r\n  handleSubmitClick,\r\n}) => {\r\n  return (\r\n    <>\r\n      <form>\r\n        <div>\r\n          name: <input value={name} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={number} onChange={handleNewNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\" onClick={handleSubmitClick}>\r\n            add\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newElement) => {\r\n  return axios.post(baseUrl, newElement).then((response) => response.data);\r\n};\r\n\r\nconst update = (newElement, id) => {\r\n  return axios\r\n    .put(`${baseUrl}/${id}`, newElement)\r\n    .then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`).then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","const Message = ({ message }) => {\r\n  const correctStyle = {\r\n    color: \"green\",\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  };\r\n\r\n  const errorStyle = {\r\n    color: \"red\",\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  };\r\n\r\n  if (Object.keys(message).length === 0) {\r\n    return <></>;\r\n  }\r\n\r\n  const style = message.error ? errorStyle : correctStyle;\r\n\r\n  return (\r\n    <>\r\n      <p style={style}>{message.txt}</p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Numbers from \"./Numbers\";\r\nimport Filter from \"./Filter\";\r\nimport PersonForm from \"./PersonForm\";\r\nimport personService from \"../services/persons\";\r\nimport Message from \"./Message\";\r\n\r\nconst App = () => {\r\n  // Use states\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [newFilter, setNewFilter] = useState(\"\");\r\n  const [filteredPersons, setFilteredPersons] = useState([]);\r\n  const [message, setMessage] = useState({});\r\n\r\n  // Use effect\r\n  useEffect(() => {\r\n    personService.getAll().then((personsGet) => {\r\n      setPersons(personsGet);\r\n      setFilteredPersons(personsGet);\r\n    });\r\n  }, []);\r\n\r\n  //handlers on change\r\n  const handleNameChange = (event) => setNewName(event.target.value);\r\n  const handleNewNumberChange = (event) => setNewNumber(event.target.value);\r\n  const handleFilterChange = (event) =>\r\n    filterByValue(event.target.value, persons);\r\n\r\n  //handle submit\r\n  const handleSubmitClick = (event) => {\r\n    event.preventDefault();\r\n    let newElement = { name: newName, number: newNumber };\r\n    const rep = isRepeated(newElement);\r\n\r\n    if (\r\n      rep !== false &&\r\n      window.confirm(`Do you want to update ${rep.name} with other number`)\r\n    ) {\r\n      newElement = { ...rep, number: newNumber };\r\n      personService\r\n        .update(newElement, newElement.id)\r\n        .then((updatePerson) => {\r\n          let newPersons = persons.filter(\r\n            (person) => parseInt(person.id) !== parseInt(updatePerson.id)\r\n          );\r\n          newPersons = newPersons.concat(updatePerson);\r\n          setPersons(newPersons);\r\n          filterByValue(newFilter, newPersons);\r\n          showMessage(`Update ${updatePerson.name}`);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"update fail\");\r\n          showMessage(error.response.data.error, true);\r\n        });\r\n    }\r\n\r\n    if (!rep) {\r\n      personService\r\n        .create(newElement)\r\n        .then((newPerson) => {\r\n          const newPersons = persons.concat(newPerson);\r\n          setPersons(newPersons);\r\n          filterByValue(newFilter, newPersons);\r\n          showMessage(`Created ${newPerson.name}`);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"create fail\");\r\n          showMessage(error.response.data.error, (error = true));\r\n        });\r\n    }\r\n\r\n    setNewNumber(\"\");\r\n    setNewName(\"\");\r\n  };\r\n\r\n  //handle remove\r\n  const handleRemove = (event) => {\r\n    const removeElement = persons.find(\r\n      (element) => parseInt(element.id) === parseInt(event.target.id)\r\n    );\r\n\r\n    if (window.confirm(`Do you want to remove ${removeElement.name}?`)) {\r\n      personService\r\n        .remove(removeElement.id)\r\n        .then((removedPerson) => {\r\n          const newPersons = persons.filter(\r\n            (element) => element.id !== removeElement.id\r\n          );\r\n          setPersons(newPersons);\r\n          filterByValue(newFilter, newPersons);\r\n          showMessage(`Removed ${removeElement.name}`);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"remove fail\");\r\n          showMessage(error.response.data.error, (error = true));\r\n        });\r\n    }\r\n  };\r\n\r\n  //Auxiliar function\r\n  const filterByValue = (value, persons) => {\r\n    const newFilteredPersons = persons.filter((person) => {\r\n      return person.name.toLowerCase().includes(value.toLocaleLowerCase());\r\n    });\r\n    setNewFilter(value);\r\n    setFilteredPersons(newFilteredPersons);\r\n  };\r\n\r\n  //proves if new name is repetead or not\r\n  const isRepeated = (newElement) => {\r\n    let isrep = false;\r\n    let returnElement = null;\r\n\r\n    persons.forEach((element) => {\r\n      if (element.name === newElement.name) {\r\n        isrep = true;\r\n        returnElement = element;\r\n      }\r\n    });\r\n\r\n    if (isrep) {\r\n      return returnElement;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  //Message\r\n  const showMessage = (txt, error = false, time = 3000) => {\r\n    setMessage({ txt, error });\r\n    setTimeout(() => {\r\n      setMessage({});\r\n    }, time);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Message message={message} />\r\n      <Filter value={newFilter} handler={handleFilterChange} />\r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        name={newName}\r\n        number={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNewNumberChange={handleNewNumberChange}\r\n        handleSubmitClick={handleSubmitClick}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Numbers persons={filteredPersons} handleRemove={handleRemove} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}